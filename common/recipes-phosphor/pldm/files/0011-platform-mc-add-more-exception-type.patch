From 937c613b1d16c4a1bd50c9c09d9e36d2e9c519b3 Mon Sep 17 00:00:00 2001
From: Jerry C Chen <jerry.c.chen.wiwynn@gmail.com>
Date: Tue, 9 Jul 2024 16:02:23 +0800
Subject: [PATCH] platform-mc: add more exception type

Fix PLDMD crash if endpoint device doesn't response.

Change-Id: I13c0292bdb681567593fbc4a62685e6393f88a82
Signed-off-by: Jerry C Chen <jerry.c.chen.wiwynn@gmail.com>
---
 platform-mc/terminus_manager.cpp | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/platform-mc/terminus_manager.cpp b/platform-mc/terminus_manager.cpp
index 54d749d..7452f31 100644
--- a/platform-mc/terminus_manager.cpp
+++ b/platform-mc/terminus_manager.cpp
@@ -376,6 +376,13 @@ exec::task<int>
             "ERROR", e);
         co_return PLDM_ERROR;
     }
+    catch (int rc)
+    {
+        lg2::error(
+             "sendRecvPldmMsgOverMctp failed. rc={RC}",
+	     "RC", rc);
+        co_return PLDM_ERROR;
+    }
 }
 
 exec::task<int> TerminusManager::getTidOverMctp(mctp_eid_t eid, pldm_tid_t* tid)
-- 
2.25.1

